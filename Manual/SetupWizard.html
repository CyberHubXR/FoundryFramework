<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Setup Wizard | Foundry Core </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Setup Wizard | Foundry Core ">
      
      
      <link rel="icon" href="../Media/foundry_icon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/CyberHubXR/FoundryCore/blob/main/Documentation/Manual/SetupWizard.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../Media/foundry_icon.png" alt="Foundry Core">
            Foundry Core
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="setup-wizard">Setup Wizard</h1>

<p>The setup wizard is Foundry's way of helping you get started with your project. If there's some dependencies or
configuration that you're missing, the window will open and notify you of what you need to do.</p>
<h2 id="adding-a-setup-task">Adding a setup task</h2>
<p>If you are developing a module or project using foundry and you want to add your own sections and tasks to this window, you can!</p>
<h3 id="adding-a-task">Adding a task</h3>
<p>The most common implementation of setup tasks is checking if a needed dependency is installed, so let's look at an example of that.</p>
<pre><code class="lang-csharp">using Foundry.Core.Editor;
using System.Collections.Generic;
using UnityEditor;
using UnityEngine;


namespace Foundry.Core.Setup { 
    // Implement IModuleSetupTasks, the setup wizard will then be able to find this class and add it to the list of tasks.
    public class FoundryPhysicsSetup: IModuleSetupTasks
    {
        // Cache state since this gets reloaded every time assemblies are reloaded
        bool layersExist = false;
        
        // Cache stuff in the constructor
        public FoundryPhysicsSetup()
        {
            layersExist = FoundryPhysicsSetter.LayersExist();
        }
        
        // Return the current state of all the tasks we register from this class, if you return UncompletedRequiredTasks the setup window will open.
        public IModuleSetupTasks.State GetTaskState()
        {
            return layersExist ? IModuleSetupTasks.State.Completed : IModuleSetupTasks.State.UncompletedRequiredTasks;
        }

        // Return a list of task lists, each task list will be a section in the setup window, all grouped under one module.
        public List&lt;SetupTaskList&gt; GetTasks()
        {
            if (layersExist)
                return new();
            var configureLayersTask = new SetupTask();
            configureLayersTask.name = &quot;Required Physics Layers&quot;;
            configureLayersTask.SetTextDescription(&quot;We require three custom physics layers:\nFoundryPlayer,\nFoundryHand,\nFoundryGrabbable.\nThese layers help with stability and performance&quot;);
            
            // Add an action to be completed when clicked.
            configureLayersTask.action = new SetupAction
            {
                name = &quot;Add Layers&quot;,
                callback = AddLayers
            };
            
            // Create a &quot;settings&quot; list and add our task to it.
            var configureLayersTaskList = new SetupTaskList(&quot;Settings&quot;);
            configureLayersTaskList.Add(configureLayersTask);
            
            // This is built to be able to return multiple task lists (for example if you wanted to have a &quot;Dependencies&quot; and &quot;Settings&quot; section) for now we just do one.
            return new List&lt;SetupTaskList&gt;{ configureLayersTaskList};
        }

        // Return the name and source of the module that this task is for, this is only used for displaying in the setup wizard 
        // so you could put anything here, but keeping to a pattern is nice.
        public string ModuleName()
        {
            return &quot;Foundry Core Physics&quot;;
        }

        public string ModuleSource()
        {
            return &quot;foundry.core&quot;;
        }

        // In this example we add phsyics layers, but you could do anything here.
        static void AddLayers() {
            FoundryPhysicsSetter.CreateLayers();
            Physics.IgnoreLayerCollision(LayerMask.NameToLayer(&quot;FoundryPlayer&quot;), LayerMask.NameToLayer(&quot;FoundryHand&quot;), true);
            Physics.IgnoreLayerCollision(LayerMask.NameToLayer(&quot;FoundryPlayer&quot;), LayerMask.NameToLayer(&quot;FoundryGrabbable&quot;), true);

            AssetDatabase.Refresh(); 
            EditorUtility.RequestScriptReload();
        }
    }
}
</code></pre>
<p>This creates a task that will check if the package com.example.package is installed, and if it isn't, it will add a
task to the setup wizard that will install it.</p>
<p>It is worth noting that the you can populate the description of a task with any VisualElement that you want. Here
we just use the <code>SetTextDescription</code> method to set the text, but you could also do it manually like so:</p>
<pre><code class="lang-csharp">// with a label
addPackageTask.description = new Label(&quot;We need to add com.example.package to the project for it to work.&quot;);

// with a text element (this is what SetTextDescription does)
var desc = new TextElement();
desc.text = &quot;We need to add com.example.package to the project for it to work.&quot;;
desc.style.whiteSpace = WhiteSpace.Normal;
addPackageTask.description = desc;
</code></pre>
<p>Why would you ever use a custom description? Well what if you wanted to have an image instead of text? You could do that!</p>
<pre><code class="lang-csharp">var descImage = new Image();
descImage.image = Resources.Load&lt;Texture2D&gt;(&quot;description_image&quot;);
descImage.style.maxHeight = 150;
descImage.style.alignSelf = Align.Center;

addPackageTask.description = descImage;
</code></pre>
<p>You could even do something interactive, but that's beyond the scope of this example.</p>

</article>


        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Foundry Core Docs
        </div>
      </div>
    </footer>
  </body>
</html>
